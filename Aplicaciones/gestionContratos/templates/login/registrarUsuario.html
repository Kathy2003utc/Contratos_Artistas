<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registro de Usuario</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- bootstrap-fileinput -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-fileinput@5.5.3/css/fileinput.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-fileinput@5.5.3/js/fileinput.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-fileinput@5.5.3/js/locales/es.js"></script>

    <!-- Font Awesome (íconos) -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

    <!-- jQuery Validate -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/additional-methods.min.js"></script>

    <!-- SweetAlert2 -->
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    <style>
        body {
            background: linear-gradient(135deg, #4e73df, #224abe);
        }
        .card {
            border: none;
            border-radius: 1rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }
        .bg-register-image {
            background-image: url('https://source.unsplash.com/random/500x700?music');
            background-position: center;
            background-size: cover;
        }
         /* Mensajes en rojo */
        .error {
            color: #ff4d4d;
            margin-top: 0.25rem;
            display: block;

        }
        .form-control.error {
            border: 1px solid red;
        }
        .main-content {
            margin-left: 300px;
            padding: 20px;
        }

    </style>
</head>
<body class="d-flex justify-content-center align-items-center min-vh-100">

<div class="container">
    <div class="card o-hidden shadow-lg">
        <div class="row g-0">
            <div class="col-lg-5 d-none d-lg-block bg-register-image"></div>
            <div class="col-lg-7">
                <div class="p-5">
                    <h1 class="h4 text-center text-primary mb-4">Regístrate</h1>

                    <form id="frm_nuevo_patrocinador" class="row g-3" action="{% url 'registrar_usuario' %}" method="post" enctype="multipart/form-data">
                        {% csrf_token %}

                        <div class="col-md-6">
                            <input type="text" name="username" class="form-control" placeholder="Ingrese su Usuario" required>
                        </div>
                        <div class="col-md-6">
                            <input type="text" name="first_name" class="form-control" placeholder="Ingrese sus Nombres" required>
                        </div>
                        <div class="col-md-6">
                            <input type="text" name="last_name" class="form-control" placeholder="Ingrese sus Apellidos" required>
                        </div>
                        <div class="col-md-6">
                            <input type="email" name="email" class="form-control" placeholder="Ingrese el Correo electrónico" required>
                        </div>
                        <div class="col-md-6">
                            <input type="text" name="telefono" class="form-control" placeholder="Ingrese su Teléfono" required>
                        </div>
                        <div class="col-md-12">
                            <label>Foto de perfil:</label>
                            <input type="file" name="foto_perfil" class="form-control" id="foto_perfil" accept="image/*">
                        </div>
                        <div class="col-12">
                            <textarea name="direccion" class="form-control" placeholder="Ingrese su Dirección" required></textarea>
                        </div>

                        <div class="col-12">
                            <label for="rol">Selecciona tu rol:</label>
                            <select class="form-select" name="rol" id="rol" required>
                                <option value="">-- Selecciona --</option>
                                <option value="Cliente">Cliente</option>
                                <option value="Artista">Artista</option>
                            </select>
                        </div>

                        <!-- Campos solo para Artistas -->
                        <div id="campos-artista" style="display: none;">
                            <div class="col-12 mt-3">
                                <label>Portafolio (PDF):</label>
                                <input type="file" name="portafolio_pdf" id="portafolio_pdf" class="form-control" accept="application/pdf"><br>
                            </div>
                            <div class="col-md-6">
                                <label>Facebook:</label>
                                <input type="url" name="facebook_url" class="form-control" placeholder="URL de Facebook(Opcional)"><br>
                            </div>
                            <div class="col-md-6">
                                <label>X (Twitter):</label>
                                <input type="url" name="x_url" class="form-control" placeholder="URL de X-Twitter(Opcional)"><br>
                            </div>
                            <div class="col-12">
                                <label>Página Web:</label>
                                <input type="url" name="web_url" class="form-control" placeholder="URL de página web(Opcional)"><br>
                            </div>
                        </div>

                        <!-- Contraseñas -->
                        <div class="col-md-6 mt-3">
                            <label>Ingrese su Contraseña:</label>
                            <input type="password" name="password" class="form-control" placeholder="Contraseña" required>
                        </div>
                        <div class="col-md-6 mt-3">
                            <label>Ingrese nuevamente su contraseña:</label>
                            <input type="password" name="password2" class="form-control" placeholder="Repetir contraseña" required>
                        </div>

                        <!-- Botón -->
                        <div class="col-12 mt-4">
                            <button type="submit" class="btn btn-primary w-100">Registrarse</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Scripts personalizados -->
<script>
    // Mostrar campos de artista
    document.getElementById('rol').addEventListener('change', function () {
        const extras = document.getElementById('campos-artista');
        extras.style.display = this.value === 'Artista' ? 'block' : 'none';
    });

    // Configurar fileinput
    $("#portafolio_pdf").fileinput({
        language: "es",
        allowedFileExtensions: ["pdf"],
        showCaption: false,
        dropZoneEnabled: true,
        showClose: false
    });

    $("#foto_perfil").fileinput({
        language: "es",
        allowedFileExtensions: ["png", "jpg", "jpeg"],
        showCaption: false,
        dropZoneEnabled: true,
        showClose: false
    });

    $("#frm_nuevo_patrocinador").validate({
        rules: {
            "username": {
                required: true,
                minlength: 3,
                maxlength: 50
            },
            "first_name": {
                required: true,
                minlength: 2,
                maxlength: 50
            },
            "last_name": {
                required: true,
                minlength: 2,
                maxlength: 50
            },
            "email": {
                required: true,
                email: true
            },
            "telefono": {
                required: true,
                minlength: 7,
                maxlength: 15,
                digits: true
            },
            "direccion": {
                required: true,
                minlength: 5,
                maxlength: 200
            },
            "foto_perfil": {
                required: true,
                extension: "jpg|jpeg|png"
            },
            "portafolio_pdf": {
                required: true,
                extension: "pdf"
            },
            "password": {
                required: true,
                minlength: 6,
                maxlength: 30
            },
            "password2": {
                required: true,
                equalTo: "[name='password']"
            }
        },
        messages: {
            "username": {
                required: "Este campo es obligatorio",
                minlength: "Ingrese al menos 3 caracteres",
                maxlength: "Máximo 50 caracteres permitidos"
            },
            "first_name": {
                required: "Este campo es obligatorio",
                minlength: "Ingrese al menos 2 caracteres",
                maxlength: "Máximo 50 caracteres permitidos"
            },
            "last_name": {
                required: "Este campo es obligatorio",
                minlength: "Ingrese al menos 2 caracteres",
                maxlength: "Máximo 50 caracteres permitidos"
            },
            "rol": {
                required: "Este campo es obligatorio",
            },
            "email": {
                required: "Este campo es obligatorio",
                email: "Debe ser un correo válido"
            },
            "telefono": {
                required: "Este campo es obligatorio",
                minlength: "Ingrese al menos 7 dígitos",
                maxlength: "Máximo 15 dígitos permitidos",
                digits: "Sólo se permiten números"
            },
            "direccion": {
                required: "Este campo es obligatorio",
                minlength: "Ingrese al menos 5 caracteres",
                maxlength: "Máximo 200 caracteres permitidos"
            },
            "foto_perfil": {
                required: "Este campo es obligatorio",
                extension: "Solo se permiten archivos de imagen (jpg, jpeg, png)"
            },
            "portafolio_pdf": {
                required: "Este campo es obligatorio para artistas",
                extension: "Solo se permiten archivos PDF"
            },
            "password": {
                required: "Este campo es obligatorio",
                minlength: "Mínimo 6 caracteres",
                maxlength: "Máximo 30 caracteres permitidos"
            },
            "password2": {
                required: "Este campo es obligatorio",
                equalTo: "Las contraseñas no coinciden"
            }
        }
    });

</script>

{% if messages %}
  {% for mensaje in messages %}
    <script>
      swal({
        title: "MENSAJE",
        text: "{{ mensaje|escapejs }}",
        icon: "{% if message.tags == 'error' %}error{% elif message.tags == 'success' %}success{% else %}info{% endif %}"
      });
    </script>
  {% endfor %}
{% endif %}





</body>
</html>
